# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Pgboundary < Formula
  desc "A wrapper around boundary and pgbouncer CLI for integration into IDE/database tooling"
  homepage "https://github.com/sigterm-de/pgboundary"
  version "0.2.2"

  depends_on "boundary"
  depends_on "pgbouncer"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/sigterm-de/pgboundary/releases/download/v0.2.2/pgboundary_Darwin_x86_64.zip"
      sha256 "88d68a4d0c81cc3b2fbd9b98d4de4d703cea0433403765d431a296b5a5ddf8fb"

      def install
        # Install the binary into Homebrew's bin directory
        bin.install "pgboundary"

        # Install example configuration files into a documentation directory
        doc.install "pgboundary.ini"
        doc.install "pg_auth"
        doc.install "pg_config.ini"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/sigterm-de/pgboundary/releases/download/v0.2.2/pgboundary_Darwin_arm64.zip"
      sha256 "ac5534e9b1279cff151db7b0fc6e37fef6981770c50bcc71e32f88fc2fac2469"

      def install
        # Install the binary into Homebrew's bin directory
        bin.install "pgboundary"

        # Install example configuration files into a documentation directory
        doc.install "pgboundary.ini"
        doc.install "pg_auth"
        doc.install "pg_config.ini"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/sigterm-de/pgboundary/releases/download/v0.2.2/pgboundary_Linux_x86_64.zip"
        sha256 "5210f089c1fbc1833e38830ed9d1633f76a51cd83b329240bde5409b1ba8e542"

        def install
          # Install the binary into Homebrew's bin directory
          bin.install "pgboundary"

          # Install example configuration files into a documentation directory
          doc.install "pgboundary.ini"
          doc.install "pg_auth"
          doc.install "pg_config.ini"
        end
      end
    end
    if Hardware::CPU.arm?
      if Hardware::CPU.is_64_bit?
        url "https://github.com/sigterm-de/pgboundary/releases/download/v0.2.2/pgboundary_Linux_arm64.zip"
        sha256 "37c7a43a5330fe8eff31818b553c297769aef71f591a653155c0adbb4c689f4e"

        def install
          # Install the binary into Homebrew's bin directory
          bin.install "pgboundary"

          # Install example configuration files into a documentation directory
          doc.install "pgboundary.ini"
          doc.install "pg_auth"
          doc.install "pg_config.ini"
        end
      end
    end
  end

  def caveats
    <<~EOS
      The example configuration file has been installed at:
        #{doc}/pgboundary.ini
        #{doc}/pg_config.ini
        #{doc}/pg_auth
      You may copy and modify it for your use:
        cp #{doc}/pgboundary.ini ~/pgboundary/pgboundary.ini
        cp #{doc}/pg_config.ini ~/pgboundary/pg_config.ini
        cp #{doc}/pg_auth ~/pgboundary/pg_auth
    EOS
  end
end
